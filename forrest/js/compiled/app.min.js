$(document).ready(function(){var u,n="8PyTZKuJ1VEQWvDvoOsARLkT8f6N71db",o="https://api.behance.net/v2/users/",s="https://www.behance.net/v2/projects/",m=["codycobb","ashthorp","Filiphds"],p={projectsPerPage:3,nextPageNumber:1},l={commentsPerPage:10,nextPageNumber:1},g={},f=mixitup(".projects",{selectors:{target:".project",control:"[data-mixitup-control]"},animation:{enable:!0,duration:300,easing:"ease-in-out"},behavior:{liveSort:!0}});function a(e,t,o){$.ajax({method:"GET",dataType:"jsonp",url:e,success:function(e){t(e,o)},error:function(e){if("error"===e.statusText||404===e.statusText)throw $("#errorModal").show(),$("body").addClass("modalShowing"),new Error("No More API Requests")}})}function h(e,t){var o=$(e).html();return Handlebars.compile(o)(t)}function v(e){return moment.unix(e).format("Do MMM YYYY")}function t(e){for(var t=0;t<m.length;t++)a(o+m[t]+"/projects?client_id="+n+"&per_page="+p.projectsPerPage+"&page="+e,c,m[t]);p.nextPageNumber++}function r(t,o){a(s+t+"?api_key="+n,function(e){!function(e){var t=e.project,o={articles:[],creators:[],fieldsString:"",description:null,creationDate:v(t.published_on),projectName:t.name,stats:{likes:t.stats.appreciations,views:t.stats.views,comments:t.stats.comments},projectID:t.id,behanceURL:t.url};""!==t.description&&(o.description=t.description);for(var n=0;n<t.modules.length;n++){var s=t.modules[n];switch(s.type){case"image":o.articles.push(s.sizes.max_1200);break;case"media_collection":for(var a=s.components,r=0;r<a.length;r++)o.articles.push(a[r].sizes.max_1200)}}for(var i=0;i<t.owners.length;i++){var l=t.owners[i],c={};c.url=l.url,c.name=l.display_name,i!=t.owners.length-1&&(c.name+=","),o.creators.push(c)}o.fieldsString=t.fields.join(", ");var d=h("#projectDetailsTemplate",o);$("#modalContent").append(d),(u=$("#images").slick({lazyLoad:"progressive",initialSlide:1,slidesToShow:1,slidesToScroll:1,infinite:!0,adaptiveHeight:!1,arrows:!0,prevArrow:"<i class='slick-prev fa fa-angle-left'>Previous</i>",nextArrow:"<i class='slick-next fa fa-angle-right'>Right</i>",responsive:[{breakpoint:1e3,settings:{adaptiveHeight:!0,arrows:!1}}]})).on("lazyLoaded",function(){u.slick("setPosition")})}(e),i(t),o&&o()})}function i(e){a(s+e+"/comments?client_id="+n+"&per_page="+l.commentsPerPage+"&page="+l.nextPageNumber,function(e){!function(e){var t=e.comments,o=[],n=!1;if(0<t.length){for(var s=0;s<t.length;s++){var a=t[s],r={commenter:{name:a.user.display_name,image:a.user.images[115],link:a.user.url},comment:a.comment,publishedOn:v(a.created_on)},i=h("#commentTemplate",r);o.push(i)}$("#comments").append(o)}t.length<l.commentsPerPage&&($("#loadMoreComments").text("No more comments to load").css("cursor","not-allowed"),n=!0);n||$("#loadMoreComments").removeClass("disabledButton")}(e),l.nextPageNumber++})}function c(e,t){var o=e.projects,n=$(".project").length,s=!1;if(o.length<p.projectsPerPage){if(!g[t]){g[t]=!1;for(var a=m.length-1;0<=a;a--)if(m[a]===t){m.splice(a,1);break}}3<=Object.keys(g).length&&($("#loadMoreProjects").text("No more projects to load").css("cursor","not-allowed"),s=!0)}if(0<o.length)for(var r=0;r<o.length;r++){n+=1;var i=o[r],l={coverImage:i.covers[404],projectName:i.name,stats:{likes:i.stats.appreciations,views:i.stats.views,comments:i.stats.comments},projectID:i.id,publishedOn:i.published_on,creator:null,creatorID:[],counter:n};1<i.owners.length?l.creator="Multiple Owners":l.creator=i.owners[0].display_name;for(var c=0;c<i.owners.length;c++){var d=i.owners[c];l.creatorID.push(d.id)}var u=h("#projectTemplate",l);f.append(u,!1)}s||$("#loadMoreProjects").removeClass("disabledButton")}function d(){$("#loader").fadeToggle({duration:300,easing:"swing"})}function b(e){$("#modalMask").fadeToggle({duration:300,easing:"swing",complete:e})}function w(){$("body").toggleClass("modalShowing")}$(document).on("click",".projectInner",function(e){e.preventDefault(),d(),b(),r(this.dataset.projectid,d),w()}),$(".closeIcon").on("click",function(){l.nextPageNumber=1,w(),b(function(){u.slick("unslick"),$("#modalContent").empty()})}),$(document).on("click","#loadMoreComments",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreComments").addClass("disabledButton"),i(this.dataset.projectid))}),$("#loadMoreProjects").on("click",function(e){e.preventDefault(),$(this).hasClass("disabledButton")||($("#loadMoreProjects").addClass("disabledButton"),t(p.nextPageNumber))}),$("#drawerOpener").on("click",function(){$("#sortingControls").slideToggle(300),$("#drawerOpener p i").toggleClass("rotationalInvert")}),$(".sortButton").on("click",function(){var e=$(".orderButton.active")[0].dataset.sortonly;$("#sortingTopic").text(this.innerText),$(".sortButton").removeClass("active"),$(this).addClass("active"),f.sort(this.dataset.sortonly+":"+e)}),$(".orderButton").on("click",function(){var e=$(".sortButton.active")[0].dataset.sortonly;$(".orderButton").removeClass("active"),$(this).addClass("active"),f.sort(e+":"+this.dataset.sortonly)}),$(".filterButton").on("click",function(){$("#filteringTopic").text(this.innerText),$(".filterButton").removeClass("active"),$(this).addClass("active")}),t(p.nextPageNumber),$("[data-toggle='tooltip']").tooltip({trigger:"hover"})});